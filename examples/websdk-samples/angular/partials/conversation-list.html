<a  href="#{{conversation.id.substring(8)}}"
    class="conversation-item"
    ng-class="{'unread-messages': conversation.unreadCount, 'selected-conversation': conversation.id === chatCtrlState.currentConversation.id}"
    ng-click="setConversation(conversation)"
    ng-repeat="conversation in query.data track by conversation.id">
  <div class="avatar-image {{conversation.participants.length > 2 ? 'cluster' : ''}}">
    <span ng-repeat="identity in conversation.participants | filter:filterParticipants">
        <div class="{{conversation.participants.length === 2 ?  'layer-presence layer-presence-' + identity.status.toLowerCase() : 'layer-presence-hidden'}}"></div>
        <img src="{{identity.avatarUrl}}" />
    </span>
  </div>
  <div class="info">
    <div class="main">
      <span class="title">{{getConversationTitle(conversation)}}</span>
      <span class="delete fa fa-times-circle"
            title="Delete conversation"
            ng-click="deleteConversation(conversation)">
      </span>
    </div>
  </div>
</a>
